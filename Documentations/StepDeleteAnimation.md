# 애니매이션 없는 경우 
1~3단계 스텝이 있을 때 2단계 스텝을 삭제해보자. 삭제되면서 현재 화면에 보이는 스텝은 3단계가 된다. 하지만 별다른 애니메이션 효과가 발생하지 않아 사용자 입장에서는 2단계가 정상적으로 삭제됐는지 알 수 없다. 

# 애니메이션이 있는 경우 

## 삭제 시 뒤의 스텝으로 이동 
사용자가 스텝이 정상적으로 됐다는 것을 알기 위해서는 삭제 시 다른 스텝으로 이동하는 애니메이션 효과를 주어야한다. 2단계 삭제 시 3단계를 보여주는 것이 바람직해보인다. 이 경우 2가지 방법이 있다. 

1. 2단계를 삭제 후 3단계로 이동한다. 
2. 3단계를 삭제 후 2단계로 이동한다. 

각각 단점이 있다. 1번의 경우 빈 화면을 보여주면서 3단계로 이동하고 2번은 애니메이션 자체가 부적절해진다. 순서상 앞에 있는 탭이 사라지면 탭뷰에 다시 애니메이션 효과가 발생한다. 

## 삭제 시 앞의 스텝으로 이동 

빈 화면을 보여주기도 싫었고 애니메이션 효과도 바르게 주기 위해서 스텝 삭제 시 뒤로 이동하는게 아니라 앞으로 이동하기로 했다. 여러 방법을 거쳤는데 문서를 바로 작성하지 않아서 과정은 잊어버렸다. 

현재 최종적으로 채택한 방식은 스텝을 삭제할 때 바로 삭제하는게 아니라 삭제될 탭의 인덱스를 저장했다가 `onDisappear()`가 발생할 때 삭제하는 것이다. 

```swift

func trashButtonTapped(_ i: Int) {
     withAnimation {
         stepTabSelection = stepForms[i-1].id
         deletedStepIndex = i
     }
 }

func flushDeletedStepIndex() {
     if let i = deletedStepIndex {
         stepForms.remove(at: i)
     }
     
     deletedStepIndex = nil
 }
```
삭제 버튼을 누르면 앞의 인덱스로 이동한다. 동시에 삭제 인덱스를 저장한다.

`onDisappear`가 발생하면서 저장된 인덱스의 스텝을 삭제하고 다시 nil 처리 해준다. 